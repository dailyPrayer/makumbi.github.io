<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Alex Makumbi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="This space is designed for software developers, technology enthusiast and open minded individuals unafraid to question everything">
    <meta name="author" content="Alex Makumbi">
    <meta name="keywords" content="Software Developer, Technology, Blog, Personal Development, Tutorials">
    <meta name="generator" content="JBake">

    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
  </head>
  <body onload="prettyPrint()">
    <div id="wrap">
	
	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        <a class="navbar-brand" href="index.html">makumbi
          </a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="about.html">About</a></li>
            <li><a href="index.html">Articles</a></li>
            <li><a href="archive.html">Archive</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">

	<div class="page-header">
		<h1>Articles</h1>
	</div>
  			<a href="blog/2017/software-vulnerability-sql-injection.html"><h1>Software Vulnerability - SQL Injection</h1></a>
  			<p>08 January 2017</p>
  			<p><p><img src="/img/protect-against-sql-injection.png" alt="insecure login" /></p>
<p>In this article I create a simple form to demonstrate insecure interaction between a java based component<br/>and the outside world explaining why the form poses as a vulnerability to the overall application.<br/>Finally, I show how to properly secure the application. </p>
<p>A simple Java application is created with a simple login form that retrieves username and password using<br/>two JTextFields and storing them into the Derby Database.</p>
<p><img src="/img/insecure-login.png" alt="insecure login" /></p>
<p>Once login button is pressed username and password is sent to be stored the DB.</p>
<p><strong>Note:</strong> The simple login application does not take into account other software vulnerabilities.<br/>We’re only demonstrating SQL Injection vulnerability. </p>
<p><img src="/img/insecure-login-storing.png" alt="insecure login storing" /></p>
<p>The application works great, but when we take a look under the hood we find that this application is vulnerable<br/>to SQL Injection attacks because SQL statements are not prepared and are dynamically storing data directly into<br/>the database. </p>
<h3>Insecure Code</h3>
<hr/>
<pre><code> private static void insertUserInfor(String userName, String userPass)
    {
        try
        {
            createConnection();
            stmt = conn.createStatement();
            stmt.execute(&quot;insert into &quot; + tableName + &quot; values (&#39;&quot; +
                    userName + &quot;&#39;, &#39;&quot; + userPass + &quot;&#39;)&quot;);
            
            stmt.close();
        }
        catch (SQLException sqlExcept)
        {
            sqlExcept.printStackTrace();
        }
    }
</code></pre>
<p>SQL Injection attacks are the most prevent attacks to an application and inflicts the most damage exposing<br/>sensitive data. Injection attacks attempt to break into application databases by injecting malicious code,<br/>oftentimes in a form of SQL statements. They are often injected through form fields similar to the small<br/>application I created, but are also injected through uploads, 3rd party APIs, configuration files, input files etc. </p>
<h3>Secured Code</h3>
<hr/>
<p>The code snippet above shows the application retrieving username and password directly placing it into the SQL<br/>statement without validating or sanitizing the data. Essentially, the developer trusts the user not to<br/>inject malicious code. The user should never be trusted. Below I demonstrate how to properly prepare SQL statements<br/>in java. </p>
<pre><code>private static void insertUserInfor(String userName, String userPass)
    {
        try
        { 
            // establish connection
            createConnection();
            String qTxt = &quot;INSERT INTO &quot; + tableName + &quot;VALUES (?,?)&quot;;
            prepStmt = conn.prepareStatement(qTxt);
            prepStmt.setString(1, userName);
            prepStmt.setString(1, userPass);
            
            prepStmt.close();
        }
        catch (SQLException sqlExcept)
        {
            sqlExcept.printStackTrace();
        }
    }
</code></pre>
<p>When SQL statements are prepared information received from the user is placed in a prepared statement and not directly<br/>into the SQL query, thus mitigating dynamic queries. </p>
<p>In this demonstration, I have alluded to mention another measure to take in order to mitigate SQL Injection attacks,<br/>which is to validate and sanitize data retrieved from the user. As we’ve mentioned, the application cannot trust data<br/>from the outside world. Information must be validated for content, length, format, and other factors before use. </p></p>
  			<a href="blog/2013/fourth-post.html"><h1>Fourth Post</h1></a>
  			<p>17 October 2013</p>
  			<p><div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel diam purus. Curabitur ut nisi lacus.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://example.org" class="bare">http://example.org</a></p>
</li>
<li>
<p><a href="http://example.org">Example.org</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nam id nisl quam. Donec a lorem sit amet libero pretium vulputate vel ut purus. Suspendisse leo arcu,
mattis et imperdiet luctus, pulvinar vitae mi. Quisque fermentum sollicitudin feugiat. Mauris nec leo
ligula. Vestibulum tristique odio ut risus ultricies a hendrerit quam iaculis. Duis tempor elit sit amet
ligula vehicula et iaculis sem placerat. Fusce dictum, metus at volutpat lacinia, elit massa auctor risus,
id auctor arcu enim eu augue. Donec ultrices turpis in mi imperdiet ac venenatis sapien sodales. In
consequat imperdiet nunc quis bibendum. Nulla semper, erat quis ornare tristique, lectus massa posuere
libero, ut vehicula lectus nunc ut lorem. Aliquam erat volutpat.</p>
</div></p>
  			<a href="blog/2013/third-post.html"><h1>Third Post</h1></a>
  			<p>26 September 2013</p>
  			<p><div class="paragraph">
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel diam purus. Curabitur ut nisi lacus.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://example.org" class="bare">http://example.org</a></p>
</li>
<li>
<p><a href="http://example.org">Example.org</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nam id nisl quam. Donec a lorem sit amet libero pretium vulputate vel ut purus. Suspendisse leo arcu,
mattis et imperdiet luctus, pulvinar vitae mi. Quisque fermentum sollicitudin feugiat. Mauris nec leo
ligula. Vestibulum tristique odio ut risus ultricies a hendrerit quam iaculis. Duis tempor elit sit amet
ligula vehicula et iaculis sem placerat. Fusce dictum, metus at volutpat lacinia, elit massa auctor risus,
id auctor arcu enim eu augue. Donec ultrices turpis in mi imperdiet ac venenatis sapien sodales. In
consequat imperdiet nunc quis bibendum. Nulla semper, erat quis ornare tristique, lectus massa posuere
libero, ut vehicula lectus nunc ut lorem. Aliquam erat volutpat.</p>
</div></p>
  			<a href="blog/2013/second-post.html"><h1>Second Post</h1></a>
  			<p>25 August 2013</p>
  			<p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel diam purus. Curabitur ut nisi lacus.</p>
<ul>
  <li><a href="http://example.org">http://example.org</a></li>
  <li><a href="http://example.org">Example.org</a></li>
</ul>
<p>Nam id nisl quam. Donec a lorem sit amet libero pretium vulputate vel ut purus. Suspendisse leo arcu,<br/>mattis et imperdiet luctus, pulvinar vitae mi. Quisque fermentum sollicitudin feugiat. Mauris nec leo<br/>ligula. Vestibulum tristique odio ut risus ultricies a hendrerit quam iaculis. Duis tempor elit sit amet<br/>ligula vehicula et iaculis sem placerat. Fusce dictum, metus at volutpat lacinia, elit massa auctor risus,<br/>id auctor arcu enim eu augue. Donec ultrices turpis in mi imperdiet ac venenatis sapien sodales. In<br/>consequat imperdiet nunc quis bibendum. Nulla semper, erat quis ornare tristique, lectus massa posuere<br/>libero, ut vehicula lectus nunc ut lorem. Aliquam erat volutpat.</p></p>
  			<a href="blog/2013/first-post.html"><h1>First Post</h1></a>
  			<p>24 July 2013</p>
  			<p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque vel diam purus. Curabitur ut nisi lacus.</p>

<ul>
<li><a href="http://example.org">http://example.org</a></li>
<li><a href="http://example.org">Example.org</a></li>
</ul>

<p>Nam id nisl quam. Donec a lorem sit amet libero pretium vulputate vel ut purus. Suspendisse leo arcu, 
mattis et imperdiet luctus, pulvinar vitae mi. Quisque fermentum sollicitudin feugiat. Mauris nec leo 
ligula. Vestibulum tristique odio ut risus ultricies a hendrerit quam iaculis. Duis tempor elit sit amet 
ligula vehicula et iaculis sem placerat. Fusce dictum, metus at volutpat lacinia, elit massa auctor risus, 
id auctor arcu enim eu augue. Donec ultrices turpis in mi imperdiet ac venenatis sapien sodales.</p> 

<pre class="prettyprint">
<code>
package org.jbake;

public class Oven {
	public static void main(String[] args) {
		System.out.print("Baking!");
  }
}
</code>
</pre>

<p>In consequat imperdiet nunc quis bibendum. Nulla semper, erat quis ornare tristique, lectus massa posuere 
libero, ut vehicula lectus nunc ut lorem. Aliquam erat volutpat.</p>
</p>
	
	<hr />
	
	<p>Older posts are available in the <a href="archive.html">archive</a>.</p>

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        <p class="muted credit">&copy; 2017 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.1.1</a> | Baked with <a href="http://jbake.org">JBake v2.5.0</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery-1.11.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/prettify.js"></script>
    
  </body>
</html>

